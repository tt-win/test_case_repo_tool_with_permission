/* 緊湊設計系統 */

/* 僅在所屬分頁為 active 時顯示標記了 data-role="tab-only" 的區塊 */
.tab-pane:not(.active) [data-role="tab-only"] {
    display: none !important;
}

/* 測試案例 Diff 專用樣式 */
#tcDiffContainer .diff-value { white-space: pre-wrap; }
#tcDiffBulkActions { flex-wrap: nowrap; }
#tcDiffBulkActions .btn { white-space: nowrap; }
.btn {
    padding: 0.25rem 0.5rem !important;
    font-size: 0.875rem !important;
    line-height: 1.4 !important;
}

/* 更小的按鈕樣式 */
.btn-xs {
    padding: 0.125rem 0.375rem !important;
    font-size: 0.75rem !important;
    line-height: 1.3 !important;
}

/* TestRail 色彩系統 - 保留 */
:root {
    /* TestRail 色彩系統 */
    --tr-primary-rgb: 74, 144, 226;
    --tr-primary: #4A90E2;
    --tr-primary-dark: #357ABD;
    --tr-primary-light: #E3F2FD;
    --tr-secondary: #7B68EE;
    --tr-secondary-dark: #5A4FCF;
    --tr-secondary-light: #F3F0FF;
    --tr-success: #5CB85C;
    --tr-success-dark: #449D44;
    --tr-success-light: #DFF0D8;
    --tr-warning: #F0AD4E;
    --tr-warning-dark: #EC971F;
    --tr-warning-light: #FCF8E3;
    --tr-danger: #D9534F;
    --tr-danger-dark: #C9302C;
    --tr-danger-light: #F2DEDE;
    --tr-info: #5BC0DE;
    --tr-info-dark: #31B0D5;
    --tr-info-light: #D9EDF7;

    /* 背景色系 */
    --tr-bg-body: #F8F9FA;
    --tr-bg-header: #FFFFFF;
    --tr-bg-sidebar: #F5F6F7;
    --tr-bg-content: #FFFFFF;
    --tr-bg-card: #FFFFFF;
    --tr-bg-light: #F8F9FA;

    /* 邊框色系 */
    --tr-border: #DEE2E6;
    --tr-border-light: #E1E5E9;
    --tr-border-medium: #D1D5D9;
    --tr-border-dark: #ADB5BD;

    /* 文字色系 */
    --tr-text-primary: #212529;
    --tr-text-secondary: #6C757D;
    --tr-text-muted: #868E96;
    --tr-text-light: #ADB5BD;

    /* 陰影 */
    --tr-shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
    --tr-shadow-md: 0 4px 6px rgba(0,0,0,0.1);
    --tr-shadow-lg: 0 10px 25px rgba(0,0,0,0.15);
}

/* 基礎重置 */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    font-size: 14px;
    line-height: 1.5;
    color: var(--tr-text-primary);
    background-color: var(--tr-bg-body);
}

/* 基礎容器 - 緊湊設計 */
.container-fluid {
    max-width: 100%;
    padding: 0.75rem; /* 減少內邊距 */
}

/* 基礎按鈕樣式 */
.btn {
    border-radius: 6px;
    font-weight: 500;
    transition: all 0.2s ease;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

/* 主要操作按鈕 - 藍色系 */
.btn-primary {
    background: linear-gradient(135deg, var(--tr-primary) 0%, #5BA0F2 100%);
    border: 1px solid var(--tr-primary);
    color: #ffffff;
}

.btn-primary:hover {
    background: linear-gradient(135deg, var(--tr-primary-dark) 0%, #4A8FD1 100%);
    border-color: var(--tr-primary-dark);
    color: #ffffff;
}

.btn-primary:focus, .btn-primary:active {
    background: linear-gradient(135deg, var(--tr-primary-dark) 0%, #4A8FD1 100%);
    border-color: var(--tr-primary-dark);
    color: #ffffff;
    box-shadow: 0 0 0 0.2rem rgba(74, 144, 226, 0.25);
}

/* 次要操作按鈕 - 灰藍色系 */
.btn-secondary {
    background: linear-gradient(135deg, #8E9AAF 0%, #A8B4C8 100%);
    border: 1px solid var(--tr-border-medium);
    color: #ffffff;
}

.btn-secondary:hover {
    background: linear-gradient(135deg, #7A8599 0%, #9BA7BB 100%);
    border-color: var(--tr-border-medium);
    color: #ffffff;
}

/* 檢視操作按鈕 - 冷灰藍色系 */
.btn-view {
    background: linear-gradient(135deg, #6B7D8C 0%, #8394A5 100%);
    border: 1px solid #6B7D8C;
    color: #ffffff;
}

.btn-view:hover {
    background: linear-gradient(135deg, #5A6B7A 0%, #6B7D8C 100%);
    border-color: #5A6B7A;
    color: #ffffff;
}

/* 編輯操作按鈕 - 中性藍灰色系 */
.btn-edit {
    background: linear-gradient(135deg, #5B6C84 0%, #708199 100%);
    border: 1px solid #5B6C84;
    color: #ffffff;
}

.btn-edit:hover {
    background: linear-gradient(135deg, #4A5A72 0%, #5B6C84 100%);
    border-color: #4A5A72;
    color: #ffffff;
}

/* 危險操作按鈕 - 低飽和度紅色系 */
.btn-danger {
    background: linear-gradient(135deg, #B85450 0%, #C96A66 100%);
    border: 1px solid #B85450;
    color: #ffffff;
}

.btn-danger:hover {
    background: linear-gradient(135deg, #A44743 0%, #B85450 100%);
    border-color: #A44743;
    color: #ffffff;
}


/* 基礎卡片樣式 */
.card {
    border: 1px solid var(--tr-border-light);
    border-radius: 8px;
    box-shadow: var(--tr-shadow-sm);
    background-color: var(--tr-bg-card);
}

/* 基礎表格樣式 */
.table {
    margin-bottom: 0;
    color: var(--tr-text-primary);
}

.table th {
    border-bottom: 2px solid var(--tr-border-light);
    font-weight: 600;
    background-color: var(--tr-bg-sidebar);
    color: var(--tr-text-secondary);
    vertical-align: middle;
    padding: 0.75rem;
}

.table td {
    border-bottom: 1px solid var(--tr-border-light);
    vertical-align: middle;
    padding: 0.75rem;
}

.table-hover tbody tr:hover {
    background-color: var(--tr-bg-sidebar);
}

/* Flash Messages */
#flash-messages {
    position: fixed;
    top: 1rem;
    right: 1rem;
    z-index: 1060;
    max-width: 400px;
}

.alert {
    border-radius: 6px;
    margin-bottom: 0.5rem;
    box-shadow: var(--tr-shadow-md);
    border: 1px solid var(--tr-border-light);
}

.alert-success {
    background-color: #D4EDDA;
    color: var(--tr-success);
    border-color: var(--tr-success);
}

.alert-danger {
    background-color: #F8D7DA;
    color: var(--tr-danger);
    border-color: var(--tr-danger);
}

.alert-warning {
    background-color: #FFF3CD;
    color: var(--tr-warning);
    border-color: var(--tr-warning);
}

.alert-info {
    background-color: #CCE8F4;
    color: var(--tr-info);
    border-color: var(--tr-info);
}

/* 文字顏色工具類 */
.text-primary { color: var(--tr-primary) !important; }
.text-secondary { color: var(--tr-text-secondary) !important; }
.text-muted { color: var(--tr-text-muted) !important; }
.text-success { color: var(--tr-success) !important; }
.text-danger { color: var(--tr-danger) !important; }
.text-warning { color: var(--tr-warning) !important; }
.text-info { color: var(--tr-info) !important; }

/* Test Case Number 樣式 */
code.small {
    color: #495057 !important; /* 較深的灰色 */
    background-color: transparent !important;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-weight: 500;
    white-space: nowrap !important; /* 防止換行 */
}

/* Test Case Number 欄位不換行 - 確保足夠寬度顯示完整 TCG 號碼 */
#testCasesTable tbody td[data-field="test_case_number"] {
    white-space: nowrap !important;
    min-width: 180px !important;
    max-width: 200px !important;
    width: 190px !important;
}

/* Test Case 資料列樣式 */
#testCasesTable tbody tr {
    color: #495057 !important; /* 整個資料列使用較深的灰色 */
}

#testCasesTable tbody td {
    color: #495057 !important; /* 確保所有資料單元格使用較深的灰色 */
    vertical-align: middle !important; /* 強制垂直對齊 */
    padding: 0.25rem 0.5rem !important; /* 更小的內邊距 */
    height: 2rem !important; /* 更密集的行高 */
}

#testCasesTable thead th {
    vertical-align: middle !important; /* 表頭也要垂直對齊 */
    padding: 0.75rem !important; /* 統一內邊距 */
}

/* 確保日期欄位也使用深灰色 */
#testCasesTable tbody td .text-muted {
    color: #495057 !important; /* 覆蓋 text-muted 的顏色 */
}

/* 分離式操作按鈕樣式 */
.test-case-actions {
    display: flex;
    gap: 4px;
    align-items: center;
    justify-content: center;
    height: 100%;
}

.test-case-actions .btn {
    border-radius: 4px !important; /* 四方形圓角 */
    min-width: 32px;
    height: 32px;
    padding: 0 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

/* TCG 標籤樣式 */
.tcg-tag {
    background-color: #f8f9fa !important;
    color: #495057 !important;
    border: 1px solid #dee2e6 !important;
    font-size: 0.75rem !important;
    font-weight: 500 !important;
    padding: 0.125rem 0.25rem !important; /* 減少右側內邊距 */
    border-radius: 0.25rem !important;
    margin: 0 !important; /* 移除外邊距 */
    display: inline-block; /* 改回 inline-block */
    line-height: 1;
    height: auto !important; /* 自動高度 */
    vertical-align: middle; /* 垂直對齊 */
    white-space: nowrap; /* 防止內容換行 */
    box-sizing: border-box; /* 確保邊框計算正確 */
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace; /* 使用等寬字體 */
    letter-spacing: 0; /* 移除字母間距 */
}

.tcg-tag:hover {
    background-color: #e9ecef !important;
    border-color: #adb5bd !important;
}

/* TCG 編輯區域 */
.tcg-edit-area {
    cursor: pointer;
    min-height: 1.5rem; /* 最小高度，允許內容撐開 */
    display: inline-flex; /* 改為 inline-flex 讓寬度自適應內容 */
    align-items: center;
    justify-content: flex-start;
    flex-wrap: nowrap;
    gap: 0.25rem;
    padding: 0; /* 移除內邊距，與標頭對齊 */
    border-radius: 0.375rem;
    transition: all 0.2s ease;
    width: auto; /* 改為自動寬度 */
    white-space: nowrap;
    overflow: visible; /* 允許標籤顯示 */
}

/* TCG 編輯時的表格單元格固定高度 */
#testCasesTable tbody td[data-field="tcg"] {
    height: 2rem !important; /* 與其他單元格一致 */
    vertical-align: middle !important;
    padding: 0.25rem 0.5rem !important; /* 與其他單元格一致 */
    white-space: nowrap !important; /* 防止換行 */
    min-width: 80px !important; /* 縮小最小寬度 */
    width: auto !important; /* 自動寬度，根據內容調整 */
}

/* TCG 編輯時容器固定高度 */
#testCasesTable tbody td[data-field="tcg"].editing {
    height: 2rem !important; /* 編輯時也保持一致高度 */
    vertical-align: middle !important;
    padding: 0.25rem 0.5rem !important; /* 與其他單元格一致 */
    overflow: visible !important; /* 允許下拉選單顯示 */
}

.tcg-edit-area:hover {
    background-color: rgba(0, 123, 255, 0.05);
}

.tcg-edit-area.editing {
    background-color: #fff;
    border: none !important;
    box-shadow: none !important;
    outline: none !important;
}

/* TCG 編輯下拉選單 - 移除藍框避免行高變化 */
.tcg-dropdown {
    position: fixed !important;
    z-index: 9999 !important;
    background: white !important;
    border: 1px solid #dee2e6 !important;
    border-radius: 0.375rem;
    box-shadow: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.1) !important;
    max-height: 200px;
    overflow-y: auto;
    display: block !important;
    min-width: 300px;
}

.tcg-dropdown-item {
    padding: 0.25rem 0.75rem;
    cursor: pointer;
    border-bottom: 1px solid #f8f9fa;
    transition: background-color 0.15s ease;
    font-size: 0.875rem;
    color: #212529;
    line-height: 1.2;
}

.tcg-dropdown-item:hover {
    background-color: #e3f2fd !important;
    color: #0d47a1;
}

.tcg-dropdown-item:last-child {
    border-bottom: none;
}

/* TCG 搜尋輸入框 */
.tcg-search-input {
    border: 1px solid #dee2e6 !important;
    outline: none !important;
    box-shadow: none !important;
    background: transparent;
    font-size: 0.875rem;
    padding: 0.25rem 0.5rem;
    width: 150px;
    min-width: 100px;
}

.tcg-search-input:focus {
    border: 1px solid #dee2e6 !important;
    outline: none !important;
    box-shadow: none !important;
}


/* 緊湊設計 - 卡片 */
.card {
    margin-bottom: 0.75rem !important;
}

.card-body {
    padding: 0.75rem !important;
}

.card-header {
    padding: 0.5rem 0.75rem !important;
}

/* 緊湊設計 - 表單元素 */
.form-control, .form-select {
    padding: 0.25rem 0.5rem !important;
    font-size: 0.875rem !important;
    line-height: 1.4 !important;
    border: 1px solid var(--tr-border-light);
}

.form-label {
    margin-bottom: 0.25rem !important;
    font-weight: 500 !important;
    font-size: 0.875rem !important;
}

/* 輸入群組緊湊樣式 */
.input-group {
    margin-bottom: 0.75rem !important;
}

/* Modal緊湊樣式 */
.modal-header {
    padding: 0.75rem 1rem !important;
}

.modal-body {
    padding: 1rem !important;
}

.modal-footer {
    padding: 0.75rem 1rem !important;
}

.modal-title {
    font-size: 1.1rem !important;
}




/* 表格緊湊樣式 */
.table th {
    padding: 0.75rem !important;
    font-size: 0.875rem !important;
}

.table td {
    padding: 0.75rem !important;
    font-size: 0.875rem !important;
}

/* 行距緊湊化 */
.mb-3 {
    margin-bottom: 0.75rem !important;
}

.mb-4 {
    margin-bottom: 1rem !important;
}

.mt-3 {
    margin-top: 0.75rem !important;
}

.mt-4 {
    margin-top: 1rem !important;
}

/* 間距調整 */
.row {
    margin: 0 -0.375rem !important;
}

.row > * {
    padding: 0 0.375rem !important;
}

/* 導航和分頁緊湊樣式 */
.pagination {
    margin-bottom: 0.5rem !important;
}


/* Modal 中的 TCG 編輯區域 - 防止藍框影響高度 */
#testCaseModal #modalTCGContainer.tcg-modal-edit-area.editing {
    min-height: 38px !important;
    max-height: 38px !important;
    overflow: visible !important;
    position: relative !important;
    border: 1px solid #ced4da !important;
}

/* Modal 中的 TCG 搜尋框 - 移除藍框，使用淡色邊框 */
#testCaseModal #modalTCGContainer .form-control.tcg-modal-search-input:focus,
#testCaseModal #modalTCGContainer .tcg-modal-search-input.form-control:focus {
    border-color: #ced4da !important;
    box-shadow: none !important;
    outline: none !important;
}

/* Modal 中的 TCG 搜尋框 - 確保高度一致，移除預設樣式 */
#testCaseModal #modalTCGContainer .form-control.tcg-modal-search-input,
#testCaseModal #modalTCGContainer .tcg-modal-search-input.form-control {
    height: 36px !important;
    border: 1px solid #ced4da !important;
    box-shadow: none !important;
}

/* Modal 中的 TCG 下拉選單 - 確保絕對定位不影響父容器 */
#testCaseModal #modalTCGContainer .tcg-modal-dropdown {
    position: absolute !important;
    top: 100% !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 1060 !important;
    margin-top: 1px !important;
}

/* 固定包含 TCG 編輯區域的整個 row 高度 */
#testCaseModal .fixed-section .row {
    min-height: 65px !important;
    align-items: flex-start !important;
}

/* 強制設定 Test Case Number 表格標題和儲存格寬度 */
table th:nth-child(2),
table td:nth-child(2) {
    width: 190px !important;
    max-width: 200px !important;
    min-width: 180px !important;
}

/* 更具體的選擇器 */
.table th:nth-child(2),
.table td:nth-child(2) {
    width: 190px !important;
    max-width: 200px !important;
    min-width: 180px !important;
}

.page-link {
    padding: 0.375rem 0.5rem !important;
    font-size: 0.875rem !important;
}

/* 固定分頁欄（可複用，與語言切換按鈕相同定位模型） */
.fixed-pagination-bar {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1040; /* 低於語言切換按鈕 (1070) */
    background-color: transparent;
    padding: 0.25rem 0.75rem;
    border-top: none;
    pointer-events: none; /* 讓容器不攔截點擊事件 */
}
.fixed-pagination-bar .pagination {
    margin-bottom: 0 !important;
    pointer-events: auto; /* 只有分頁控制本身可以點擊 */
    z-index: 1039 !important; /* 確保低於語言選擇器 (1070) */
    /* 確保分頁控制不會超出其實際內容區域 */
    width: fit-content !important;
    margin: 0 auto !important; /* 置中顯示分頁控制 */
}

/* 頁面標題顏色自定義 - 使用更高權重的選擇器 */
/* 主標題使用完整的主題色 */
main > .d-flex.justify-content-between.align-items-center.mb-3 h1.h3 {
    color: var(--tr-primary) !important;
}

/* 副標題使用帶有 70% 透明度的主題色，以達到柔和、退後的效果 */
main > .d-flex.justify-content-between.align-items-center.mb-3 p.text-muted {
    color: rgba(74, 144, 226, 0.7) !important;
}
:root {
  --header-height: 64px;
  --footer-height: 52px;
}

.app-header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: var(--header-height);
  z-index: 1030;
}

.app-footer {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: var(--footer-height);
  z-index: 1030;
}

/* 語言選擇器層級設定 - 確保在所有內容之上 */
#language-switcher {
  position: relative;
  z-index: 1070 !important;
  pointer-events: auto !important;
}

#language-switcher .dropdown,
#language-switcher .dropdown-toggle,
#language-switcher .dropdown-menu {
  z-index: 1075 !important;
  pointer-events: auto !important;
}

/* 確保語言選擇器在 Test Case Management 頁面可點擊 */
.app-footer #language-switcher {
  z-index: 1070 !important;
  pointer-events: auto !important;
}

.app-main {
  min-height: calc(100vh - var(--header-height) - var(--footer-height));
  padding-top: calc(var(--header-height) + 8px);
  padding-bottom: calc(var(--footer-height) + 8px);
  overflow: auto;
}

/* Sticky table header within scroll containers */
.table-sticky thead th {
  position: sticky;
  top: 0;
  background-color: var(--bs-body-bg, #fff);
  z-index: 2;
}

/* Inline clear button inside inputs */
.input-clear-btn {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  border: none;
  background: transparent;
  color: #6c757d;
  padding: 0;
  line-height: 1;
}
.input-clear-btn:hover { color: #495057; }

/* Seamless input + button in search group */
.input-group-search .position-relative .form-control {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
  border-right: 0;
}
.input-group-search .btn {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}
/* Apply focus ring to the whole search group, not the button */
.input-group-search:focus-within {
  box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, .25);
  border-radius: 0.375rem;
}
/* Remove extra focus shadow from the button itself */
.input-group-search .btn:focus,
.input-group-search .btn:focus-visible {
  box-shadow: none;
  outline: none;
}

/* Status badge (slightly larger with more padding) */
.badge-status-lg {
  font-size: 0.75rem;
  padding: 0.45em 0.7em;
}

/* 團隊名稱標籤樣式 */
#team-name-badge {
    transition: all 0.2s ease;
    border-radius: 12px;
    padding: 0.25rem 0.5rem;
    font-weight: 500;
}

#team-name-badge:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

/* 響應式設計 */
@media (max-width: 768px) {
    #team-name-badge {
        font-size: 0.7rem !important;
        padding: 0.2rem 0.4rem !important;
    }

    #team-name-badge .fas {
        display: none;
    }
}

/* TCG Hover Tooltip 樣式 */
#tcg-tooltip {
    z-index: 1070;
    pointer-events: auto;
    animation: tooltipFadeIn 0.2s ease-out;
}

@keyframes tooltipFadeIn {
    from {
        opacity: 0;
        transform: translateY(5px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.tcg-tooltip-content {
    max-width: 300px;
    word-wrap: break-word;
}

.tcg-tooltip-content .fw-bold {
    word-break: break-all;
}

.tcg-tooltip-content .small {
    font-size: 0.75rem;
}

/* TCG tag hover 效果增強 */
.tcg-tag {
    transition: all 0.2s ease;
    cursor: help;
}

.tcg-tag:hover {
    background-color: #e3f2fd !important;
    border-color: #2196f3 !important;
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(33, 150, 243, 0.2);
}

/* Fun loading animation (compact, same line-height impression) */
.fun-loader { width: 220px; height: 28px; position: relative; }
.fun-track { position: relative; width: 100%; height: 100%; overflow: hidden; }
.fun-ground { position: absolute; left: 0; right: 0; bottom: 2px; height: 2px; background: repeating-linear-gradient(90deg, #cfd6de 0 12px, #e7ecf2 12px 24px); }
.fun-runner { position: absolute; bottom: 6px; left: -32px; font-size: 18px; animation: runAcross 2.2s linear infinite; }
@keyframes runAcross { from { left: -32px; } to { left: calc(100% + 32px); } }
.fun-dot { position: absolute; bottom: 9px; left: -16px; width: 10px; height: 10px; background: var(--tr-primary, #4A90E2); border-radius: 50%; animation: runAcross 2.2s linear infinite; opacity: .85; }

/* 版本更新按鈕樣式 */
#version-update-btn {
    position: relative;
    overflow: hidden;
    border: 1px solid #17a2b8;
    color: #17a2b8;
    background-color: transparent;
    transition: all 0.3s ease;
}

#version-update-btn:hover {
    background-color: #17a2b8;
    color: white;
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(23, 162, 184, 0.3);
}

/* 不刺眼的緩慢閃爍動畫 */
.version-update-pulse {
    animation: versionPulse 3s ease-in-out infinite;
}

@keyframes versionPulse {
    0%, 100% {
        opacity: 1;
        box-shadow: 0 0 0 rgba(23, 162, 184, 0);
    }
    50% {
        opacity: 0.8;
        box-shadow: 0 0 10px rgba(23, 162, 184, 0.4);
    }
}

/* 避免動畫過於頻繁影響用戶體驗 */
.version-update-pulse:hover {
    animation: none;
}
